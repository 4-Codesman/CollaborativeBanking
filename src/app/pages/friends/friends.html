<div class="friends-container">
  <!-- ðŸ”µ Page Header -->
  <header class="header">
    <h1>Friends</h1>
    <p class="subheading">Track savings, compete with friends, and grow together.</p>
  </header>

  <!-- ðŸ†” Referral Code -->
  <section class="friends-card highlight-card">
    <h3>Your Referral Code</h3>
    <p class="highlight-code">{{ currentUID }}</p>
    <p class="note">Share this code so others can add you as a friend.</p>
  </section>

  <!-- âž• Add a Friend -->
  <section class="friends-card">
    <h3>Add a Friend</h3>
    <div class="input-row">
      <input [(ngModel)]="friendCode" placeholder="Enter friend code" />
      <button (click)="addFriendByCode()">Add</button>
    </div>
  </section>

  <!-- ðŸ“¬ Friend Requests -->
  <section class="friends-card">
    <h3>Friend Requests</h3>
    <button (click)="showFriendRequests = !showFriendRequests">
      {{ showFriendRequests ? 'Hide Requests' : 'Show Requests' }}
    </button>
    <ul *ngIf="showFriendRequests" class="request-list">
      <li *ngFor="let request of friendRequests">
        <span>{{ request.name }}</span>
        <div class="action-buttons">
          <button (click)="acceptRequest(request)">Accept</button>
          <button (click)="rejectRequest(request)">Reject</button>
        </div>
      </li>
    </ul>
  </section>

  <!-- ðŸ§‘ðŸ¾â€ðŸ¤â€ðŸ§‘ðŸ¾ Your Friends -->
  <section class="friends-card">
    <h3>Your Friends</h3>
    <button (click)="showFriendList = !showFriendList">
      {{ showFriendList ? 'Hide Friends' : 'Show Friends' }}
    </button>
    <div *ngIf="showFriendList" class="friends-list">
      <div *ngFor="let friend of friendsList">
        <span>{{ friend.name }}</span>
        <button (click)="removeFriend(friend)">Remove</button>
      </div>
    </div>
  </section>

  <!-- ðŸ§© Monthly Pair Progress -->
  <section class="friends-card">
    <h3>Random Monthly Pair</h3>
    <div class="circular-progress-item">
      <div class="circular-progress-container">
        <svg class="progress-ring" viewBox="0 0 36 36">
          <circle class="progress-ring__bg" cx="18" cy="18" r="15.9155"/>
          <circle class="progress-ring__value"
                  [attr.stroke-dasharray]="pairProgress + ', 100'"
                  cx="18" cy="18" r="15.9155"/>
        </svg>
        <span class="progress-text">{{ pairProgress }}%</span>
      </div>
      <div class="friend-name">
        You & <strong>{{ pairFriend?.name }}</strong> are {{ pairProgress }}% to your goal
      </div>
    </div>
  </section>

  <!-- ðŸ† Leaderboard -->
  <section class="friends-card">
    <h3>Friend Leaderboard</h3>
    <ol class="leaderboard-list">
      <li *ngFor="let friend of leaderboard">
        <span class="leader-name">{{ friend.name }}</span>
        <span class="leader-score">{{ friend.personalGoalProgress || 0 }}%</span>
        <progress [value]="friend.personalGoalProgress || 0" max="100"></progress>
      </li>
    </ol>
  </section>
</div>
