<div class="view-stokvel-wrapper">
  <main class="vStokvel-container">
    <header class="vStokvel-header">
      <h1 *ngIf="!stokvelDetails">Your Stokvel Groups</h1>
      <h1 *ngIf="stokvelDetails">{{ stokvelDetails.name }}</h1>
    </header>

    <section class="vStokvel-content">
      <!-- View list of user's stokvels -->
      <div *ngIf="!stokvelDetails">
        <div class="vStokvel-list">
          <div *ngIf="loading" class="loading-text">Loading...</div>

          <div *ngIf="!loading && stokvelsV.length > 0">
            <div class="stokvel-cards">
              <a [routerLink]="['/stokvel/view', stokvel.id]" class="stokvel-card" *ngFor="let stokvel of stokvelsV">
                <h2>{{ stokvel.name }}</h2>
              </a>
            </div>
          </div>

          <div *ngIf="!loading && stokvelsV.length === 0" class="empty-text">
            No stokvels yet.<br />
            Create or Join a stokvel community.
          </div>
        </div>
      </div>

      <!-- Details View -->
      <div *ngIf="stokvelDetails && !loading" class="stokvel-summary">
        <p><strong>Amount:</strong> R{{ stokvelDetails.amount }}</p>
        <p><strong>Period:</strong> {{ stokvelDetails.period }}</p>
        <p><strong>Start Date:</strong> {{ stokvelDetails.startDate | date:'mediumDate' }}</p>
        <p><strong>Next Round Payout:</strong> {{ stokvelDetails.nextPayout | date:'mediumDate' }}</p>
        <p><strong>Your Withdrawal Position:</strong> {{ stokvelDetails.yourPosition }}</p>

        <h3>Members</h3>
        <ul>
          <li *ngFor="let member of stokvelDetails.members">
            <div class="circular-progress-item">
              <div class="circular-progress-container">
                <svg class="progress-ring" viewBox="0 0 36 36">
                  <circle class="progress-ring__bg" cx="18" cy="18" r="15.9155" />
                  <circle 
                    class="progress-ring__value" 
                    [attr.stroke-dasharray]="(member.progress || 0) + ', 100'" 
                    cx="18" cy="18" r="15.9155" />
                </svg>
                <span class="progress-text">{{ member.progress || 0 }}%</span>
              </div>
              <div class="friend-name">{{ member.position }}. {{ member.name }}</div>
            </div>
          </li>
        </ul>

        <div class="button-row">
          <button routerLink="/stokvel/view" class="create-button">‚Üê View All</button>
        </div>
      </div>
    </section>
  </main>
</div>
